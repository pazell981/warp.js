/*!
 * warp.js
 *
 * MIT licensed
 *
 * Copyright (C) 2014 Paul Zellmer, http://pazellmer.com
 */
;function position(b,a){b.attr("id","warp"+arrayCoord[a].index);b.animate({left:arrayCoord[a].x_axis,top:arrayCoord[a].y_axis,"z-index":arrayCoord[a].z_index,width:arrayCoord[a].width,height:arrayCoord[a].height,opacity:arrayCoord[a].opacity},2000)}function rndItems(){for(i=0;i<4;i++){if((numItems+i)%4==0){return(numItems+i)}}}function Coord(d,f,b,g,e,a,c){this.index=d;this.x_axis=f;this.y_axis=b;this.z_index=g;this.width=e;this.height=a;this.opacity=c}$("#warpContainer").parent().prepend("<div id='warp_display'></div>");$(".warp_desc, #warp_display").hide();var offset=parseInt($("#warpContainer").attr("data-offset"));var shape=$("#warpContainer").attr("data-shape");if(shape==""){shape="diamond"}var numItems=$(".warp").length;if(numItems>0){var width=$(".warp").width();var height=$(".warp").height();var xCenter=$(window).width()/2;var xLeft=$(window).width()/4;var yTop=$(window).height()/4+offset;var yCenter=($(window).height()+offset)/2;var xInc=(xCenter-xLeft)/(numItems/4);var xMov=xInc;var yInc=(yCenter-yTop)/(numItems/4);var yMov=yInc;var counter=1;var zIndex=200;var zIndexInc=parseInt(800/numItems);var limit=rndItems();arrayCoord=[];if(shape=="diamond"){for(var i=0;i<limit;i++){if(counter==1){xAxis=Math.round(((xCenter-50-xMov-(width*zIndex/1000)/2)/$(window).width())*100);yAxis=Math.round((yCenter-(height*zIndex/1000)/2)/$(window).height()*100)}else{if(counter==2){xAxis=Math.round((xCenter-(width*zIndex/1000)/2)/$(window).width()*100);yAxis=Math.round(((yCenter-50-yMov-(height*zIndex/1000)/2)/$(window).height())*100)}else{if(counter==3){xAxis=Math.round(((xCenter+50+xMov-(width*zIndex/1000)/2)/$(window).width())*100);yAxis=Math.round((yCenter-(height*zIndex/1000)/2)/$(window).height()*100);xMov+=xInc}else{xAxis=Math.round((xCenter-(width*zIndex/1000)/2)/$(window).width()*100);yAxis=Math.round(((yCenter+50+yMov-(height*zIndex/1000)/2)/$(window).height())*100);yMov+=yInc;counter=0}}}arrayCoord[i]=new Coord(i,xAxis+"%",yAxis+"%",zIndex,(width*zIndex/1000),(height*zIndex/1000),(1*zIndex/1000));zIndex+=zIndexInc;counter++}}if(shape=="column"){for(var i=0;i<limit;i++){if(counter==1){xAxis=Math.round(((xCenter-50-xMov-(width*zIndex/1000)/2)/$(window).width())*100);yAxis=Math.round((yCenter-(height*zIndex/1000)/2)/$(window).height()*100)}else{xAxis=Math.round(((xCenter+50+xMov-(width*zIndex/1000)/2)/$(window).width())*100);yAxis=Math.round((yCenter-(height*zIndex/1000)/2)/$(window).height()*100);xMov+=xInc;counter=0}arrayCoord[i]=new Coord(i,xAxis+"%",yAxis+"%",zIndex,(width*zIndex/1000),(height*zIndex/1000),(1*zIndex/1000));zIndex+=zIndexInc;counter++}}if(shape=="circle"){for(var i=0;i<limit;i++){if(counter==1){xAxis=Math.round(((xCenter-100-xMov-(width*zIndex/1000)/2)/$(window).width())*100);yAxis=Math.round((yCenter-(height*zIndex/1000)/2)/$(window).height()*100)}else{if(counter==2){xAxis=Math.round(((xCenter-100-xMov/2-(width*zIndex/1000)/2)/$(window).width())*100);yAxis=Math.round(((yCenter-100-yMov/2-(height*zIndex/1000)/2)/$(window).height())*100)}else{if(counter==3){xAxis=Math.round((xCenter-(width*zIndex/1000)/2)/$(window).width()*100);yAxis=Math.round(((yCenter-100-yMov-(height*zIndex/1000)/2)/$(window).height())*100)}else{if(counter==4){xAxis=Math.round(((xCenter+100+xMov/2-(width*zIndex/1000)/2)/$(window).width())*100);yAxis=Math.round(((yCenter-100-yMov/2-(height*zIndex/1000)/2)/$(window).height())*100)}else{if(counter==5){xAxis=Math.round(((xCenter+100+xMov-(width*zIndex/1000)/2)/$(window).width())*100);yAxis=Math.round((yCenter-(height*zIndex/1000)/2)/$(window).height()*100)}else{if(counter==6){xAxis=Math.round(((xCenter+100+xMov/2-(width*zIndex/1000)/2)/$(window).width())*100);yAxis=Math.round(((yCenter+100+yMov/2-(height*zIndex/1000)/2)/$(window).height())*100);xMov+=xInc}else{if(counter==7){xAxis=Math.round((xCenter-(width*zIndex/1000)/2)/$(window).width()*100);yAxis=Math.round(((yCenter+100+yMov-(height*zIndex/1000)/2)/$(window).height())*100)}else{xAxis=Math.round(((xCenter-100-xMov/2-(width*zIndex/1000)/2)/$(window).width())*100);yAxis=Math.round(((yCenter+100+yMov/2-(height*zIndex/1000)/2)/$(window).height())*100);yMov+=yInc;counter=0}}}}}}}arrayCoord[i]=new Coord(i,xAxis+"%",yAxis+"%",zIndex,(width*zIndex/1000),(height*zIndex/1000),(1*zIndex/1000));zIndex+=zIndexInc;counter++}}if(shape=="triangle"){for(var i=0;i<limit;i++){if(counter==1){xAxis=Math.round((xCenter-(width*zIndex/1000)/2)/$(window).width()*100);yAxis=Math.round(((yCenter-yMov-(height*zIndex/1000)/2)/$(window).height())*100)}else{if(counter==2){xAxis=Math.round(((xCenter+xMov/2-(width*zIndex/1000)/2)/$(window).width())*100);yAxis=Math.round(((yCenter+yMov/2-(height*zIndex/1000)/2)/$(window).height())*100)}else{xAxis=Math.round(((xCenter-xMov/2-(width*zIndex/1000)/2)/$(window).width())*100);yAxis=Math.round(((yCenter+yMov/2-(height*zIndex/1000)/2)/$(window).height())*100);xMov+=xInc;yMov+=yInc;counter=0}}arrayCoord[i]=new Coord(i,xAxis+"%",yAxis+"%",zIndex,(width*zIndex/1000),(height*zIndex/1000),(1*zIndex/1000));zIndex+=zIndexInc;counter++}}arrayCoord[arrayCoord.length-1].zIndex=1000;$($(".warp").get()).each(function(a){$(this).attr("id","warp"+arrayCoord[a].index);$(this).css("left",arrayCoord[a].x_axis);$(this).css("top",arrayCoord[a].y_axis);$(this).css("z-index",arrayCoord[a].zIndex);$(this).css("width",arrayCoord[a].width);$(this).css("height",arrayCoord[a].height);$(this).css("opacity",arrayCoord[a].opacity)});$(document).on("keydown",function(a){if(a.keyCode==38){$("#warpContainer").append($("#warpContainer").children(".warp:first"));$(".warp").each(function(b){position($(this),b)})}else{if(a.keyCode==40){$("#warpContainer").prepend($("#warpContainer").children(".warp:last"));$(".warp").each(function(b){position($(this),b)})}}});$(".warp:not(.warp:last)").click(function(){var b=$(this).attr("id");var a=arrayCoord.length-parseInt(b.slice(4))-2;for(i=0;i<a;i++){$("#warpContainer").prepend($("#warpContainer").children(".warp:last"));$(".warp").each(function(c){position($(this),c)})}});$(document).on("click",".warp:last",function(){$("#warp_display").html($(this).html());$("#warp_display").children().show();$("#warp_display").fadeToggle()});$("#warp_display").click(function(){$("#warp_display").fadeToggle()})};